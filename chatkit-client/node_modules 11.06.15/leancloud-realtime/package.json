{
  "_args": [
    [
      {
        "raw": "https://github.com/leancloud/js-realtime-sdk#dist",
        "scope": null,
        "escapedName": null,
        "name": null,
        "rawSpec": "https://github.com/leancloud/js-realtime-sdk#dist",
        "spec": "git+https://github.com/leancloud/js-realtime-sdk.git#dist",
        "type": "hosted",
        "hosted": {
          "type": "github",
          "ssh": "git@github.com:leancloud/js-realtime-sdk.git#dist",
          "sshUrl": "git+ssh://git@github.com/leancloud/js-realtime-sdk.git#dist",
          "httpsUrl": "git+https://github.com/leancloud/js-realtime-sdk.git#dist",
          "gitUrl": "git://github.com/leancloud/js-realtime-sdk.git#dist",
          "shortcut": "github:leancloud/js-realtime-sdk#dist",
          "directUrl": "https://raw.githubusercontent.com/leancloud/js-realtime-sdk/dist/package.json"
        }
      },
      "/Volumes/data/Learning/ionic/xman/chatkit"
    ]
  ],
  "_from": "git+https://github.com/leancloud/js-realtime-sdk.git#dist",
  "_id": "leancloud-realtime@3.2.3",
  "_inCache": true,
  "_installable": true,
  "_location": "/leancloud-realtime",
  "_phantomChildren": {},
  "_requested": {
    "raw": "https://github.com/leancloud/js-realtime-sdk#dist",
    "scope": null,
    "escapedName": null,
    "name": null,
    "rawSpec": "https://github.com/leancloud/js-realtime-sdk#dist",
    "spec": "git+https://github.com/leancloud/js-realtime-sdk.git#dist",
    "type": "hosted",
    "hosted": {
      "type": "github",
      "ssh": "git@github.com:leancloud/js-realtime-sdk.git#dist",
      "sshUrl": "git+ssh://git@github.com/leancloud/js-realtime-sdk.git#dist",
      "httpsUrl": "git+https://github.com/leancloud/js-realtime-sdk.git#dist",
      "gitUrl": "git://github.com/leancloud/js-realtime-sdk.git#dist",
      "shortcut": "github:leancloud/js-realtime-sdk#dist",
      "directUrl": "https://raw.githubusercontent.com/leancloud/js-realtime-sdk/dist/package.json"
    }
  },
  "_requiredBy": [
    "#USER"
  ],
  "_resolved": "git+https://github.com/leancloud/js-realtime-sdk.git#c4d1d5c424ecd87197da46aef0fdfdd7dbd1a9a3",
  "_shasum": "a2939a85a7ddc94dde0b992d5014327820bc6d67",
  "_shrinkwrap": null,
  "_spec": "https://github.com/leancloud/js-realtime-sdk#dist",
  "_where": "/Volumes/data/Learning/ionic/xman/chatkit",
  "browser": {
    "ws": "./src/browser/ws.js",
    "sinon": false,
    "./dist/realtime.js": "./dist/realtime.browser.js"
  },
  "bugs": {
    "url": "https://github.com/leancloud/js-realtime-sdk/issues"
  },
  "config": {
    "ghooks": {
      "commit-msg": "validate-commit-msg"
    }
  },
  "dependencies": {
    "axios": "^0.14.0",
    "babel-runtime": "^6.6.1",
    "debug": "^2.2.0",
    "eventemitter3": "^2.0.0",
    "javascript-state-machine": "^2.3.5",
    "lodash": "^4.6.0",
    "protobufjs": "^5.0.1",
    "uuid": "^2.0.1",
    "ws": "^1.1.1"
  },
  "description": "LeanCloud Realtime Message JavaScript SDK",
  "devDependencies": {
    "babel-eslint": "^7.0.0",
    "babel-plugin-external-helpers": "^6.8.0",
    "babel-plugin-istanbul": "^2.0.1",
    "babel-plugin-transform-decorators-legacy": "^1.3.4",
    "babel-plugin-transform-es2015-classes": "^6.5.2",
    "babel-plugin-transform-object-rest-spread": "^6.8.0",
    "babel-plugin-transform-runtime": "^6.6.0",
    "babel-preset-es2015": "^6.9.0",
    "babel-register": "^6.14.0",
    "conventional-changelog-cli": "^1.1.1",
    "docdash": "git+https://github.com/leeyeh/docdash.git#leancloud",
    "eslint": "^3.0.0",
    "eslint-config-airbnb-base": "^8.0.0",
    "eslint-plugin-import": "^2.0.0",
    "espree": "^3.1.4",
    "ghooks": "^1.1.0",
    "grunt": "^1.0.1",
    "grunt-contrib-connect": "^1.0.0",
    "grunt-contrib-uglify": "^2.0.0",
    "grunt-envify": "0.1.0",
    "grunt-rollup": "^0.8.0",
    "grunt-saucelabs": "^9.0.0",
    "inherit": "^2.2.3",
    "jsdoc": "3.4.0",
    "jsdoc-ignore-future": "^1.1.0",
    "leancloud-storage": "^1.0.0",
    "load-grunt-tasks": "^3.4.1",
    "mocha": "^3.0.0",
    "nyc": "^8.1.0",
    "qiniu": "^6.1.9",
    "rollup": "^0.36.0",
    "rollup-plugin-babel": "^2.4.0",
    "rollup-plugin-commonjs": "^4.0.1",
    "rollup-plugin-json": "^2.0.0",
    "rollup-plugin-node-resolve": "^2.0.0",
    "should": "^11.0.0",
    "should-sinon": "0.0.5",
    "sinon": "2.0.0-pre",
    "validate-commit-msg": "^2.5.0"
  },
  "directories": {
    "test": "test"
  },
  "gitHead": "c4d1d5c424ecd87197da46aef0fdfdd7dbd1a9a3",
  "homepage": "https://leancloud.cn/",
  "jsnext:main": "./src/index.js",
  "keywords": [
    "leancloud",
    "realtime",
    "message"
  ],
  "license": "MIT",
  "main": "./dist/realtime.js",
  "name": "leancloud-realtime",
  "nyc": {
    "require": [
      "babel-register"
    ],
    "include": [
      "src/**",
      "plugins/typed-messages/src/**"
    ],
    "reporter": [
      "lcov",
      "text"
    ],
    "sourceMap": false,
    "instrument": false
  },
  "optionalDependencies": {},
  "readme": "LeanCloud JavaScript Realtime SDK\n====\n[![Build Status](https://img.shields.io/travis/leancloud/js-realtime-sdk.svg?style=flat-square)](https://travis-ci.org/leancloud/js-realtime-sdk)\n[![Codecov](https://img.shields.io/codecov/c/github/leancloud/js-realtime-sdk.svg?style=flat-square)](https://codecov.io/github/leancloud/js-realtime-sdk)\n[![David](https://img.shields.io/david/leancloud/js-realtime-sdk.svg?style=flat-square)](https://david-dm.org/leancloud/js-realtime-sdk)\n[![npm](https://img.shields.io/npm/v/leancloud-realtime.svg?style=flat-square)](https://www.npmjs.com/package/leancloud-realtime)\n\n为您的 JavaScript App 接入 LeanCloud 实时通讯服务。\n\n版本说明\n----\nmaster 分支为开发版本。\nv2 分支上为 2.x 版本，将仅得到安全更新，相关文档参见 [2.x 文档](https://leancloud.cn/docs/js_realtime.html)。\n\n自 v3 起遵循 [语义化版本](http://semver.org/lang/zh-CN/)。\n\n安装稳定版本：\n```\nnpm install leancloud-realtime\n```\n\n安装 v2 版本：\n```\nnpm install leancloud-realtime@2\n```\n\n支持的运行环境\n----\n- 浏览器 / WebView\n  - IE 10+ / Edge\n  - Chrome 31+\n  - Firefox latest\n  - iOS 8.0+\n  - Android 4.4+\n- Node.js 0.12+\n- React Native\n  - iOS 0.22+\n  - Android 0.25+\n\n其中在 React Native 中运行需要在初始化 [Realtime](https://leancloud.github.io/js-realtime-sdk/docs/Realtime.html#Realtime) 时设置 `options.noBinary` 为 `true`。\n\n文档\n----\n- [安装文档](https://leancloud.cn/docs/realtime_guide-js.html#安装和初始化)\n- [使用文档](https://leancloud.cn/docs/realtime_guide-js.html)\n- API 文档\n  - [leancloud-realtime](https://leancloud.github.io/js-realtime-sdk/docs/)\n  - [leancloud-realtime-plugin-typed-messages](https://leancloud.github.io/js-realtime-sdk/plugins/typed-messages/docs/)\n  - [leancloud-realtime-plugin-webrtc](https://leancloud.github.io/js-realtime-sdk/plugins/webrtc/docs/)\n\nDemo\n----\n- [Simple Chatroom](https://leancloud.github.io/js-realtime-sdk/demo/simple-chatroom/) ([src](https://github.com/leancloud/js-realtime-sdk/tree/master/demo/simple-chatroom))\n- [WebRTC 视频通话](https://leancloud.github.io/js-realtime-sdk/demo/webrtc/) ([src](https://github.com/leancloud/js-realtime-sdk/tree/master/demo/webrtc))\n\n支持\n----\n* 如果你发现了新的 bug，或者有新的 feature request，请新建一个 issue\n* 在使用过程中遇到了问题时\n  * 如果你购买了技术支持服务，请新建一个 ticket。\n  * 也可以在 [论坛](https://forum.leancloud.cn/) 提问、讨论。\n\n贡献\n----\n如果你希望为这个项目贡献代码，请按以下步骤进行：\n\n0. Fork 这个项目，clone 到本地\n0. 在目录中执行 `npm install` 安装所需 Node.js 依赖包\n0. 在目录中执行 `bower install` 安装所需 web 依赖包\n0. 执行 `grunt dev` 浏览器打开 [](http://localhost:8000) 本地进行调试\n0. 编码，更新测试用例\n0. 运行 `npm test` 确保测试全部 pass\n0. 提交改动，请遵循 [conversational commit message 风格](http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html)\n0. 发起 Pull Request 至 master 分支\n\n### 项目的目录结构\n```\n.\n├── demo\n├── deploy.sh                 // 部署 gh-pages 分支\n├── release.sh                // 部署 dist 分支\n├── dist                      // 打包产出\n│   ├── realtime.browser.js     // 浏览器用\n│   ├── realtime.browser.min.js // 浏览器用(uglified)\n│   └── realtime.js             // node 用\n├── proto\n│   ├── message-compiled.js     // 使用 pbjs 生成的 message 类\n│   ├── message.js              // ES6 wrapper\n│   └── message.proto           // proto 原始文件\n├── src                       // 源码\n│   └── index.js                // 打包入口\n├── test                      // 测试用例\n│   ├── browser                 // 浏览器测试入口\n│   └── index.js                // 测试入口\n└── plugins\n    ├── typed-messages          // leancloud-realtime-plugin-typed-messages package\n    └── webrtc                  // leancloud-realtime-plugin-webrtc package\n```\n\n### Architecture\nSDK 分为连接层与应用层两部分，只存在应用层对连接层公开 API 的调用，连接层对开发者不可见。\n\n#### 连接层\n* `WebSocketPlus`：封装了 WebSocket。相比 w3 WebSocket，增加了以下特性：\n  * 是一个有限状态机\n  * 实现了 [Node.js EventEmitter 接口](https://nodejs.org/api/events.html)\n  * 超时与自动重连机制\n  * url 参数支持 Promise 及备用地址\n* `Connection`：继承自 `WebSocketPlus`，增加了与业务相关的功能：\n  * 根据 subprotocol 自动处理发送与接收的消息，应用层发送接收的均是 ProtoBuf Message 类\n  * `send` 接口返回 Promise，在 server 回复后才算 send 成功\n  * 实现了应用层 ping/pong\n\n#### 应用层\n* `Realtime`：开发者使用 SDK 的入口，负责访问 router、创建 connection、创建与管理 clients、创建 messageParser（管理消息类型）、监听 connection 的消息并 dispatch 给对应的 client\n* `Client`：所有的 clients 共享一个 connection\n  * `IMClient`：对应即时通讯中的「用户」，持有 connection 与 conversations，负责创建管理将收到的消息处理后在对应 conversation 上派发，所有的 IMClients 共享一个 messageParser\n* `MessageParser` 消息解析器，负责将一个 JSON 格式的消息 parse 为对应的 Message 类\n* `Conversation`：实现对话相关的操作\n  * `ConversationQuery`：对话查询器\n* `Messages`\n  * `AVMessage`：接口描述，生成文档用\n  * `Message`：消息基类\n  * `TypedMessage`：类型消息基类，继承自 `Message`\n  * `TextMessage`：文本消息，继承自 `TypedMessage`\n  * 其他富媒体消息类（`FileMessage` 及其子类、`LocationMessage`）由于依赖 leancloud-storage，作为另一个独立 package 发布\n\n### 开启调试模式\n\n#### Node.js\n```bash\nexport DEBUG=LC*\n```\n#### 浏览器\n```javascript\nlocalStorage.setItem('debug', 'LC*');\n```\n\nDevelop Workflow\n----\n### 本地开发\n更新 .proto 后请运行\n```\nnpm run convert-pb\n```\n测试\n```\nnpm run test:node -- --grep KEYWORDS\n```\n浏览器测试\n```\n# 在当前目录启动一个静态 server\n# static . -p 8000\nnpm run test:browser\n# open http://localhost:8000/test/browser/\n```\n生成 dist/realtime.*\n```\nnpm run build\n```\n### 持续集成\n合并 PR 到 master 分支后持续集成会自动运行 `npm build` 与 `npm run docs`，然后将 dist 目录推送到 dist 分支，将文档与 demo 推送到 gh-pages。\n\nRelease Process Workflow\n----\n0. 遵循 semver 提升 `package.json` 与 `bower.json` 中的版本号\n0. `npm run changelog` 生成新的 `changelog.md`，润色之\n0. Commit `package.json`，`bower.json`，`changelog.md`\n0. Push to remote `master` branch\n0. 等待持续集成 pass\n0. 使用 GitHub 基于 dist 分支生成 pre-release 包（for bower）\n0. Fetch and checkout remote `dist` branch 并确认该提交的内容是即将发布的版本\n0. npm publish（`npm publish`，需 npm 协作者身份），如果是 pre-release 版本需要带 next tag\n0. 如有更新，在 npm 上发布各个 plugin\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/leancloud/js-realtime-sdk.git"
  },
  "scripts": {
    "build": "grunt build --stack",
    "changelog": "conventional-changelog -p angular -i CHANGELOG.md -s",
    "convert-pb": "pbjs proto/message.proto -t commonjs > proto/message-compiled.js && sed -i '' 's/protobufjs/protobufjs\\/dist\\/protobuf-light/g' ./proto/message-compiled.js",
    "docs": "jsdoc src README.md package.json -d docs -c .jsdocrc.json && jsdoc plugins/typed-messages/src plugins/typed-messages/package.json src/messages/**message.js -d plugins/typed-messages/docs -c .jsdocrc.json && jsdoc plugins/webrtc/src plugins/webrtc/package.json -d plugins/webrtc/docs -c .jsdocrc.json ",
    "lint": "eslint --ignore-path .gitignore src test plugins",
    "test": "npm run lint && npm run build && npm run docs && npm run test:node && npm run test:browser",
    "test:browser": "grunt test-browser --stack",
    "test:node": "NODE_ENV=test nyc mocha --timeout 30000 test/index.js plugins/typed-messages/test/index.js"
  },
  "typings": "./realtime.d.ts",
  "version": "3.2.3"
}
